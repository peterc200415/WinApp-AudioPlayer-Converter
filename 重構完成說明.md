# æ–¹æ¡ˆä¸€ï¼šæ¨¡çµ„åŒ–æ¶æ§‹é‡æ§‹ - å®Œæˆå ±å‘Š

## âœ… é‡æ§‹å®Œæˆç‹€æ…‹

æ‰€æœ‰ä»»å‹™å·²å®Œæˆï¼å°ˆæ¡ˆå·²æˆåŠŸå¾å‡½æ•¸å¼ä»£ç¢¼é‡æ§‹ç‚ºæ¨¡çµ„åŒ–çš„é¡åˆ¥æ¶æ§‹ã€‚

## ğŸ“ æ–°çš„å°ˆæ¡ˆçµæ§‹

```
WinApp-AudioPlayer-Converter/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                    # æ‡‰ç”¨ç¨‹å¼å…¥å£
â”‚   â”œâ”€â”€ core/                      # æ ¸å¿ƒæ¥­å‹™é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ audio_player.py        # âœ… éŸ³é »æ’­æ”¾å™¨é¡
â”‚   â”‚   â”œâ”€â”€ subtitle_parser.py     # âœ… å­—å¹•è§£æå™¨é¡
â”‚   â”‚   â””â”€â”€ transcriber.py         # âœ… Whisper è½‰éŒ„å™¨é¡ï¼ˆå–®ä¾‹ï¼‰
â”‚   â”œâ”€â”€ ui/                        # ç”¨æˆ¶ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main_window.py         # âœ… ä¸»è¦–çª—é¡
â”‚   â”‚   â””â”€â”€ components/            # UI çµ„ä»¶
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ subtitle_display.py    # âœ… å­—å¹•é¡¯ç¤ºçµ„ä»¶
â”‚   â”‚       â”œâ”€â”€ playlist_view.py       # âœ… æ’­æ”¾åˆ—è¡¨çµ„ä»¶
â”‚   â”‚       â”œâ”€â”€ player_controls.py     # âœ… æ’­æ”¾æ§åˆ¶çµ„ä»¶
â”‚   â”‚       â””â”€â”€ progress_bar.py        # âœ… é€²åº¦æ¢çµ„ä»¶
â”‚   â””â”€â”€ utils/                     # å·¥å…·æ¨¡çµ„
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ config.py              # âœ… é…ç½®ç®¡ç†é¡
â”‚       â”œâ”€â”€ file_utils.py          # âœ… æª”æ¡ˆå·¥å…·
â”‚       â””â”€â”€ time_utils.py          # âœ… æ™‚é–“å·¥å…·
â”œâ”€â”€ config/
â”‚   â””â”€â”€ settings.json              # âœ… é…ç½®æ–‡ä»¶
â”œâ”€â”€ tests/                         # æ¸¬è©¦ç›®éŒ„ï¼ˆé ç•™ï¼‰
â”œâ”€â”€ requirements.txt               # âœ… ä¾è³´åˆ—è¡¨
â”œâ”€â”€ README.md                      # âœ… é …ç›®æ–‡æª”
â””â”€â”€ å„ªåŒ–è©•ä¼°å ±å‘Š.md                # è©•ä¼°å ±å‘Š
```

## ğŸ¯ é‡æ§‹æˆæœ

### 1. æ¶ˆé™¤å…¨å±€è®Šæ•¸
- âŒ èˆŠä»£ç¢¼ï¼šå¤§é‡å…¨å±€è®Šæ•¸ï¼ˆ`current_subtitles`, `audio_files`, `current_index` ç­‰ï¼‰
- âœ… æ–°ä»£ç¢¼ï¼šæ‰€æœ‰ç‹€æ…‹å°è£åœ¨é¡åˆ¥ä¸­ï¼ˆ`AudioPlayer`, `MainWindow` ç­‰ï¼‰

### 2. é¡åˆ¥å°è£
- âŒ èˆŠä»£ç¢¼ï¼šæ‰€æœ‰åŠŸèƒ½éƒ½æ˜¯å‡½æ•¸ï¼Œæ²’æœ‰é¡åˆ¥çµæ§‹
- âœ… æ–°ä»£ç¢¼ï¼šæ¸…æ™°çš„é¡åˆ¥å±¤æ¬¡çµæ§‹ï¼Œç¬¦åˆ OOP åŸå‰‡

### 3. æ¨¡çµ„åˆ†å±¤
- **Core å±¤**ï¼šæ¥­å‹™é‚è¼¯ï¼ˆæ’­æ”¾ã€è½‰éŒ„ã€è§£æï¼‰
- **UI å±¤**ï¼šç”¨æˆ¶ç•Œé¢ï¼ˆè¦–çª—ã€çµ„ä»¶ï¼‰
- **Utils å±¤**ï¼šå·¥å…·å‡½æ•¸ï¼ˆé…ç½®ã€æª”æ¡ˆã€æ™‚é–“ï¼‰

### 4. å–®ä¾‹æ¨¡å¼å„ªåŒ–
- `Transcriber` é¡ä½¿ç”¨å–®ä¾‹æ¨¡å¼ï¼Œé¿å…é‡è¤‡è¼‰å…¥ Whisper æ¨¡å‹

### 5. å›èª¿æ©Ÿåˆ¶
- `AudioPlayer` ä½¿ç”¨å›èª¿å‡½æ•¸èˆ‡ UI é€šä¿¡ï¼Œè§£è€¦æ¥­å‹™é‚è¼¯å’Œç•Œé¢

### 6. é…ç½®ç®¡ç†
- ç¨ç«‹çš„é…ç½®ç®¡ç†ç³»çµ±ï¼Œæ”¯æ´ JSON é…ç½®æ–‡ä»¶

### 7. éŒ¯èª¤è™•ç†
- æ”¹é€²äº†ç•°å¸¸è™•ç†æ©Ÿåˆ¶
- æ”¯æ´å¤šç¨®ç·¨ç¢¼æ ¼å¼çš„å­—å¹•æª”æ¡ˆ

## ğŸ“Š ä»£ç¢¼å°æ¯”

### èˆŠä»£ç¢¼ï¼ˆå‡½æ•¸å¼ï¼‰
```python
# å…¨å±€è®Šæ•¸
current_subtitles = []
audio_files = []
current_index = -1

def parse_srt(file_path):
    # å‡½æ•¸å¯¦ç¾
    pass

def play_single_file(file_path):
    global current_subtitles, audio_files, current_index
    # ä½¿ç”¨å…¨å±€è®Šæ•¸
    pass
```

### æ–°ä»£ç¢¼ï¼ˆé¡åˆ¥å¼ï¼‰
```python
class AudioPlayer:
    def __init__(self):
        self.current_subtitles = []
        self.playlist = []
        self.current_index = -1
    
    def play(self, file_path):
        # ä½¿ç”¨å¯¦ä¾‹è®Šæ•¸
        pass

class SubtitleParser:
    @staticmethod
    def parse_srt(file_path):
        # å°è£çš„æ–¹æ³•
        pass
```

## ğŸ”„ é·ç§»å°ç…§

| èˆŠåŠŸèƒ½ | æ–°å¯¦ç¾ |
|--------|--------|
| `parse_srt()` | `SubtitleParser.parse_srt()` |
| `format_time()` | `TimeUtils.format_time()` |
| `play_single_file()` | `AudioPlayer.play()` |
| `update_subtitles()` | `AudioPlayer._update_subtitles()`ï¼ˆå…§éƒ¨ï¼‰ |
| `convert_to_srt()` | `Transcriber.transcribe_to_srt()` |
| å…¨å±€è®Šæ•¸ç®¡ç† | `AudioPlayer` é¡çš„å¯¦ä¾‹å±¬æ€§ |
| UI é‚è¼¯æ··é›œ | åˆ†é›¢åˆ° `MainWindow` å’Œçµ„ä»¶é¡ |

## ğŸš€ ä½¿ç”¨æ–¹å¼

### é‹è¡Œæ‡‰ç”¨ç¨‹å¼
```bash
python src/main.py
```

### å°å…¥æ¨¡çµ„
```python
from src.core.audio_player import AudioPlayer
from src.core.subtitle_parser import SubtitleParser
from src.core.transcriber import Transcriber
```

## âœ¨ å„ªå‹¢ç¸½çµ

1. **å¯ç¶­è­·æ€§**ï¼šæ¨¡çµ„åŒ–çµæ§‹ï¼Œæ˜“æ–¼å®šä½å’Œä¿®æ”¹ä»£ç¢¼
2. **å¯æ¸¬è©¦æ€§**ï¼šé¡åˆ¥è¨­è¨ˆä¾¿æ–¼ç·¨å¯«å–®å…ƒæ¸¬è©¦
3. **å¯æ“´å±•æ€§**ï¼šæ–°åŠŸèƒ½å¯ä»¥è¼•é¬†æ·»åŠ åˆ°ç›¸æ‡‰æ¨¡çµ„
4. **å¯è®€æ€§**ï¼šæ¸…æ™°çš„é¡åˆ¥å’Œæ–¹æ³•å‘½åï¼Œä»£ç¢¼é‚è¼¯æ›´æ¸…æ™°
5. **å¯é‡ç”¨æ€§**ï¼šæ ¸å¿ƒé¡åˆ¥å¯ä»¥åœ¨å…¶ä»–å°ˆæ¡ˆä¸­é‡ç”¨

## ğŸ“ ä¸‹ä¸€æ­¥å»ºè­°

é›–ç„¶é‡æ§‹å·²å®Œæˆï¼Œä½†é‚„æœ‰é€²ä¸€æ­¥å„ªåŒ–çš„ç©ºé–“ï¼š

1. **æ·»åŠ å–®å…ƒæ¸¬è©¦**ï¼šç‚ºæ ¸å¿ƒé¡åˆ¥ç·¨å¯«æ¸¬è©¦ç”¨ä¾‹
2. **æ—¥èªŒç³»çµ±**ï¼šæ•´åˆ Python logging æ¨¡çµ„
3. **ç¿»è­¯åŠŸèƒ½**ï¼šå¯ä»¥åƒè€ƒ `AudioPlayer-srt-translate` æ·»åŠ ç¿»è­¯åŠŸèƒ½
4. **UI ç¾åŒ–**ï¼šæ”¹é€²ç•Œé¢è¨­è¨ˆï¼Œä½¿ç”¨ä¸»é¡Œé¡è‰²
5. **æ€§èƒ½å„ªåŒ–**ï¼šç·šç¨‹æ± ç®¡ç†ã€ç·©å­˜æ©Ÿåˆ¶ç­‰

## âš ï¸ æ³¨æ„äº‹é …

1. ç¢ºä¿å·²å®‰è£æ‰€æœ‰ä¾è³´ï¼š`pip install -r requirements.txt`
2. éœ€è¦ FFmpeg æ”¯æ´ï¼ˆç”¨æ–¼ pydub çš„éŸ³é »è™•ç†ï¼‰
3. Whisper æ¨¡å‹é¦–æ¬¡ä½¿ç”¨æ™‚æœƒè‡ªå‹•ä¸‹è¼‰
4. é…ç½®æ–‡ä»¶æœƒåœ¨é¦–æ¬¡é‹è¡Œæ™‚è‡ªå‹•å‰µå»º

## ğŸ“„ ç›¸é—œæ–‡æª”

- è©³ç´°å„ªåŒ–æ–¹æ¡ˆè«‹åƒè€ƒï¼š`å„ªåŒ–è©•ä¼°å ±å‘Š.md`
- ä½¿ç”¨èªªæ˜è«‹åƒè€ƒï¼š`README.md`
